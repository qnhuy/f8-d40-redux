<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Redux Core</title>
    <link rel="stylesheet" href="./redux.css">
  </head>
  <body>
    <div class="layout-container">
      <div class="navigate">
        <ul class="navigate-container">
          <li class="navigate-item">
            <a href="/f8-d40-redux/redux.html" class="navigate-link">Redux Core: Counter</a>
          </li>
          <li class="navigate-item">
            <a href="/f8-d40-redux/" class="navigate-link">Task Management</a>
          </li>
        </ul>
      </div>
      <div class="main-content">
        <h1 id="value">0</h1>

        <div class="actions">

          <button id="increase">Increase</button>
          <button id="decrease">Decrease</button>
          <button id="reset">Reset</button>
          <button id="removeListener">Remove Listener</button>
        </div>
      </div>
    </div>

    <!-- <script
      src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.1/redux.js"
      integrity="sha512-Olr8rkMYuxq3KpAPjYA/mAVYe7EIEP4RkhoAvD/qOrlauzE4CTvpQSg/cRX0/5Qreret4aobD0vg1xtjBqR7VA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script> -->

    <script type="module">
      import Redux from '../src/libs/redux/index.js'

      const initValue = 0
      function reducer(state, action) {
        switch (action.type) {
          case 'increase':
            return state + 1
          case 'decrease':
            return state - 1
          case 'reset':
            return 0
          default:
            return state
        }
      }

      const store = Redux.createStore(reducer, initValue)

      const value = document.getElementById('value')
      const increaseBtn = document.getElementById('increase')
      const decreaseBtn = document.getElementById('decrease')
      const resetBtn = document.getElementById('reset')
      const removeListenerBtn = document.getElementById('removeListener')

      increaseBtn.onclick = () => store.dispatch({ type: 'increase' })
      decreaseBtn.onclick = () => store.dispatch({ type: 'decrease' })
      resetBtn.onclick = () => store.dispatch({ type: 'reset' })

      function updateValue() {
        value.textContent = store.getState()
      }

      const unsubscribe = store.subscribe(updateValue)
      removeListenerBtn.onclick = unsubscribe
    </script>
  </body>
</html>
